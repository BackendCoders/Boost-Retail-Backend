using Microsoft.AspNetCore.Mvc;
using SIM.Actions;
using SIM.Data;
using SIM.Logic;

namespace SIMAPI.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class ConnverterController : ControllerBase
    {
        private readonly ICatalogueToProductActions _catalogueToProductActions;
        private readonly ICatalogueLogic _catalogueLogic;

        public ConnverterController(ICatalogueLogic catalogueLogic, ICatalogueToProductActions converter)
        {
            _catalogueLogic = catalogueLogic;
            _catalogueToProductActions = converter;
        }

        [HttpGet]
        [Route("ProcessBikes")]
        public async Task ProcessBikes()
        {
            // get products
            //var giant = await _catalogueLogic.GetProductsBySupplierAndType(DataSupplier.Giant, ProductType.Bike);
            //await _catalogueToProductActions.ProcessItems(giant, DataSupplier.Giant);

            // get products
            var trek = await _catalogueLogic.GetProductsBySupplierAndType(DataSupplier.Trek, ProductType.Bike);
            //await _catalogueToProductActions.ProcessItems(trek, DataSupplier.Trek);

            // get products
            var cube = await _catalogueLogic.GetProductsBySupplierAndType(DataSupplier.Cube, ProductType.Bike);
            //await _catalogueToProductActions.ProcessItems(cube, DataSupplier.Cube);
        }

    }
}
